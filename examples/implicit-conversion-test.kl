#lang "implicit-conversion.kl"

(example
  (let-implicit string-length
    (+ 1 "foo")))
-- =>
-- (example
--   (let-implicit string-length
--     (#%app +
--            (#%integer-literal 1)
--            (#%string-literal "foo"))))
-- =>
-- (example
--   (let-implicit string-length
--     (my-app my-+
--             (my-integer-literal 1)
--             (my-string-literal "foo"))))
-- =>
-- (example
--   (run-reader
--     ((pick-reader-ap-variant) ((pick-reader-ap-variant) (reader-pure +)
--                                                         (reader-pure 1))
--                               (reader-pure "foo"))
--     string-length)
-- =>
-- (example
--   (run-reader
--     (reader-ap-with (lambda (str2int) str2int)
--                     (reader-ap (reader-pure +)
--                                (reader-pure 1))
--                     (reader-pure "foo"))
--     string-length))
-- =>
-- (example
--   (+ 1 (string-length "foo")))
-- =>
-- (example
--   (+ 1 3))
-- =>
-- (example
--   4)
